---
output:
  html_document:
    highlight: textmate
    theme: default
    toc: no
  pdf_document:
    highlight: default
  word_document: default
---

<!---
Author: Lucas Tate <lucas.tate@pnnl.gov>
Created: Feb 02, 2015
Last Updated: Feb 02, 2015
-->

#qFeature

##Description
The `qFeature` package is designed to extract features from time series using moving windows of regression fits. The `qFeature` package was created with the intent of generalizing the feature extraction tools developed by Brett Amidan and Tom Ferryman that are used in the `calcIVT`package. This allows the package to be extended to support feature extraction in a wide-ranging array of data.

##Core Functions

###getFeatures
test

###ddply_getFeatures

###fitQ
####Description
Fits a moving quadratic (or simple linear) regression model over a series using a 2-sided window. It dynamically accounts for the incomplete windows which are caused by missing values and which occur at the beginning and end of the series.

####How fitQ() works




For your vector of response measures, a window is fit to the data that is initially centered at whatever point is indexed by `start`. From here the `x1` is used to define the width of the window which is extended equally in both directions about a center point (which is why the length must be odd). `min.window` defines how many points are required in order to fit a model and subsequently produce a value in our signature. Once our window characteristics are defined we can choose one of two regression models:


**Linear:** $y=b_0+b_1 x_1+\epsilon$

or

**Quadratic:** $y=b_0+b_1 x_1+b_2 x_2^2+\epsilon$


After our initial linear or quadratic model is fit, several features are extracted from the regression and denoted as **a**, **b**, **c**, and **d** which are defined below.

**a**: The estimated intercepts

**b**: The estimated linear coefficients

**c**: The estimated quadratic coefficients. These are NA if linear.only = TRUE

**d**: The root mean squared error (RMSE)

The data moves through the window by an increment of `skip` which has a default of 1 and fits a model using the data contained in each new window. This iterates over the entire vector of the response measure in order to produce a signature of features with a corresponding **a**, **b**, **c**, and **d** for each regression that was fit.

####Illustration

The illustration below provides a simple demonstration of how `fitQ()` fits a series of regression models to finite windows of data. The gray points denote data that falls outside the current window that is being used in fitting the regression model. In this example a window of `x1` = -3:3 is used with a `min.window` = 4. This means that as soon as 4 non-empty values have entered the window, to go ahead and fit a model. In this depiction there are only 10 windows, however in practice, the windows would continue to be fit through the entire vector of data in `y`.
<center><img src="http://i.imgur.com/y3oz9Vy.gif"></center>

####Additional Information
[fitQ() - R Documentation](http://martingale.pnl.gov/computing/repos/html_help/qFeature/html/fitQ.html "fitQ() - R Documentation")

###discFeatures
test



